<section class="password-page" data-section-id="{{ section.id }}">
  <!-- Floating Decorations -->
  <div class="password-decorations" aria-hidden="true">
    <div class="password-deco password-deco--heart-1">
      {% render 'icon-heart' %}
    </div>
    <div class="password-deco password-deco--heart-2">
      {% render 'icon-heart' %}
    </div>
    <div class="password-deco password-deco--sparkle-1">
      {% render 'icon-sparkle' %}
    </div>
    <div class="password-deco password-deco--sparkle-2">
      {% render 'icon-sparkle' %}
    </div>
    <div class="password-deco password-deco--gift">
      {% render 'icon-gift' %}
    </div>
    <div class="password-deco password-deco--star">
      {% render 'icon-star' %}
    </div>
  </div>

  <!-- Main Card -->
  <div class="password-card collage-paper collage-paper--large">
    <!-- Decorative Tape -->
    <div class="password-tape password-tape--1 collage-element collage-element--tape"></div>
    <div class="password-tape password-tape--2 collage-element collage-element--tape"></div>

    <!-- Logo -->
    <div class="password-logo">
      {%- if section.settings.logo != blank -%}
        <img
          src="{{ section.settings.logo | image_url: width: 400 }}"
          alt="{{ shop.name }}"
          width="200"
          height="auto"
          loading="eager"
        >
      {%- else -%}
        <span class="password-logo__text">{{ shop.name }}</span>
      {%- endif -%}
    </div>

    <!-- Badge -->
    <div class="password-badge collage-sticker collage-sticker--handwritten">
      {% render 'icon-sparkle' %}
      <span>{{ section.settings.badge_text | default: 'Proximamente' }}</span>
    </div>

    <!-- Content -->
    <h1 class="password-title">{{ section.settings.heading }}</h1>
    <p class="password-text">{{ section.settings.subheading }}</p>

    <!-- Newsletter Signup -->
    {%- if section.settings.show_newsletter -%}
      {% form 'customer', class: 'password-newsletter' %}
        <input type="hidden" name="contact[tags]" value="password-signup,newsletter">

        {%- if form.posted_successfully? -%}
          <div class="password-newsletter__success collage-sticker collage-sticker--small">
            {% render 'icon-check' %}
            <span>Te avisaremos cuando abramos</span>
          </div>
        {%- else -%}
          <div class="password-newsletter__group">
            <input
              type="email"
              name="contact[email]"
              placeholder="{{ section.settings.email_placeholder | default: 'tu@email.com' }}"
              required
              class="password-newsletter__input collage-input"
              aria-label="Email"
            >
            <button type="submit" class="password-newsletter__btn btn btn--primary collage-button">
              {{ section.settings.newsletter_button | default: 'Avisame' }}
              {% render 'icon-arrow-right' %}
            </button>
          </div>
          {%- if form.errors -%}
            <p class="password-newsletter__error">{{ form.errors.messages.email }}</p>
          {%- endif -%}
        {%- endif -%}
      {% endform %}
    {%- endif -%}

    <!-- Password Toggle -->
    <button class="password-toggle" type="button" data-password-toggle>
      {% render 'icon-lock' %}
      <span>{{ section.settings.password_toggle_text | default: 'Ya tengo la contrasena' }}</span>
    </button>

    <!-- Password Form -->
    {% form 'storefront_password', class: 'password-form', 'data-password-form': '' %}
      <div class="password-form__inner">
        {%- if form.errors -%}
          <p class="password-form__error">
            {{ 'general.password_page.login_form_error' | t }}
          </p>
        {%- endif -%}

        <div class="password-form__group">
          <input
            type="password"
            name="password"
            placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}"
            class="password-form__input collage-input"
            aria-label="{{ 'general.password_page.login_form_password_label' | t }}"
          >
          <button type="submit" class="password-form__btn btn btn--primary collage-button">
            {{ 'general.password_page.login_form_submit' | t }}
            {% render 'icon-arrow-right' %}
          </button>
        </div>
      </div>
    {% endform %}

    <!-- Social Links -->
    {%- if section.settings.show_social -%}
      <div class="password-social">
        {%- if section.settings.instagram_url != blank -%}
          <a href="{{ section.settings.instagram_url }}" class="password-social__link" target="_blank" rel="noopener" aria-label="Instagram">
            {% render 'icon-instagram' %}
          </a>
        {%- endif -%}
        {%- if section.settings.facebook_url != blank -%}
          <a href="{{ section.settings.facebook_url }}" class="password-social__link" target="_blank" rel="noopener" aria-label="Facebook">
            {% render 'icon-facebook' %}
          </a>
        {%- endif -%}
        {%- if section.settings.tiktok_url != blank -%}
          <a href="{{ section.settings.tiktok_url }}" class="password-social__link" target="_blank" rel="noopener" aria-label="TikTok">
            {% render 'icon-tiktok' %}
          </a>
        {%- endif -%}
      </div>
    {%- endif -%}

    <!-- Powered by -->
    <p class="password-powered">
      {{ 'general.password_page.powered_by_shopify_html' | t: shopify: '<a href="https://www.shopify.com" target="_blank" rel="noopener">Shopify</a>' }}
    </p>
  </div>
</section>

{% schema %}
{
  "name": "Pagina de Contrasena",
  "tag": "section",
  "class": "section-password",
  "settings": [
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo",
      "info": "Recomendado: 400x200px. Si no se selecciona, se muestra el nombre de la tienda."
    },
    {
      "type": "header",
      "content": "Contenido"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Texto del badge",
      "default": "Proximamente"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Titulo",
      "default": "Algo especial esta en camino"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subtitulo",
      "default": "Estamos preparando una experiencia increible para ti. Deja tu email y te avisamos cuando abramos."
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Mostrar formulario de newsletter",
      "default": true
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Placeholder del email",
      "default": "tu@email.com"
    },
    {
      "type": "text",
      "id": "newsletter_button",
      "label": "Texto del boton",
      "default": "Avisame"
    },
    {
      "type": "header",
      "content": "Contrasena"
    },
    {
      "type": "text",
      "id": "password_toggle_text",
      "label": "Texto del toggle",
      "default": "Ya tengo la contrasena"
    },
    {
      "type": "header",
      "content": "Redes sociales"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Mostrar redes sociales",
      "default": true
    },
    {
      "type": "url",
      "id": "instagram_url",
      "label": "Instagram URL"
    },
    {
      "type": "url",
      "id": "facebook_url",
      "label": "Facebook URL"
    },
    {
      "type": "url",
      "id": "tiktok_url",
      "label": "TikTok URL"
    }
  ]
}
{% endschema %}
