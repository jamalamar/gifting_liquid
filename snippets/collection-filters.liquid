{%- comment -%}
  Collection filters sidebar
  Usage: {% render 'collection-filters', collection: collection %}
{%- endcomment -%}

<div class="filters-list">
  {%- for filter in collection.filters -%}
    <div class="filter-group is-open" data-filter-group>
      <button class="filter-group__toggle" data-filter-toggle-group aria-expanded="true">
        <span>{{ filter.label }}</span>
        {% render 'icon-chevron-down' %}
      </button>

      <div class="filter-group__content" data-filter-content>
        {%- case filter.type -%}
          {%- when 'list' -%}
            <ul class="filter-group__list">
              {%- for value in filter.values -%}
                <li class="filter-option">
                  <label>
                    <input
                      type="checkbox"
                      name="{{ value.param_name }}"
                      value="{{ value.value }}"
                      {% if value.active %}checked{% endif %}
                      {% if value.count == 0 and value.active == false %}disabled{% endif %}
                      data-filter-checkbox
                    >
                    <span class="filter-option__label">{{ value.label }}</span>
                    <span class="filter-option__count">({{ value.count }})</span>
                  </label>
                </li>
              {%- endfor -%}
            </ul>

          {%- when 'price_range' -%}
            <div class="filter-price">
              <div class="filter-price__inputs">
                <div class="filter-price__field">
                  <span class="filter-price__currency">{{ cart.currency.symbol }}</span>
                  <input
                    type="number"
                    name="{{ filter.min_value.param_name }}"
                    value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                    min="0"
                    max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                    placeholder="Min"
                    data-filter-price-min
                  >
                </div>
                <span class="filter-price__separator">-</span>
                <div class="filter-price__field">
                  <span class="filter-price__currency">{{ cart.currency.symbol }}</span>
                  <input
                    type="number"
                    name="{{ filter.max_value.param_name }}"
                    value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                    min="0"
                    max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                    placeholder="Max"
                    data-filter-price-max
                  >
                </div>
              </div>
            </div>
        {%- endcase -%}
      </div>
    </div>
  {%- endfor -%}

  {%- if collection.filters.size > 0 -%}
    <div class="filters-actions">
      <a href="{{ collection.url }}" class="filters-clear">
        Limpiar filtros
      </a>
    </div>
  {%- endif -%}
</div>
